import{d as m,g as n,i as e,t as h,o as r,_ as j,C as k,u as C,D as w,r as v,x as N,b as $,z as f,F as x,k as D,a as S}from"./index-G_Ayme-S.js";import{P as B}from"./ProjectModal-D_kGTwr2.js";const E={class:"image-wrapper"},L=["src"],M={class:"card-footer"},O=m({__name:"ProjectCard",props:{project:{}},emits:["open"],setup(i){return(t,s)=>(r(),n("div",{class:"card-container",onClick:s[0]||(s[0]=p=>t.$emit("open"))},[e("div",E,[e("img",{src:i.project.images&&i.project.images.length>0?i.project.images[0]:"https://via.placeholder.com/400x250/333/fff?text=DevDeck",alt:"Capa do Projeto",class:"project-img"},null,8,L)]),e("div",M,[e("h3",null,h(i.project.title),1)]),s[1]||(s[1]=e("div",{class:"overlay"},[e("div",{class:"gear-icon"},[e("i",{class:"bi bi-gear-fill"})]),e("span",null,"Gerenciar")],-1))]))}}),z=j(O,[["__scopeId","data-v-a3b70fb9"]]),F={class:"view-content"},I={key:0,class:"loading-state"},T={key:1,class:"projects-grid"},U={key:2,class:"empty-state"},V=m({__name:"UserDashboard",setup(i){const t=k(),s=C(),{projects:p,isLoading:g}=w(t),l=v(!1),c=v(null),u=v(!1);N(async()=>{await t.fetchProjects()});function P(){c.value=null,l.value=!0}function _(a){c.value=a,l.value=!0}async function b(a){u.value=!0;try{c.value?(await t.updateProject({...a,id:c.value.id}),s.success("Projeto atualizado com sucesso!")):(await t.createNewProject(a),s.success("Novo projeto criado!")),l.value=!1}catch(o){s.error(o.message||"Erro ao salvar projeto.")}finally{u.value=!1}}async function y(a){u.value=!0;try{await t.removeProject(a),s.success("Projeto removido com sucesso."),l.value=!1}catch{s.error("Não foi possível excluir o projeto.")}finally{u.value=!1}}return(a,o)=>(r(),n("div",F,[e("div",{class:"toolbar"},[e("button",{class:"btn-action-white",onClick:P},[...o[1]||(o[1]=[e("i",{class:"bi bi-plus-lg"},null,-1),e("span",null,"Novo Projeto",-1)])])]),f(g)?(r(),n("div",I,[...o[2]||(o[2]=[e("div",{class:"spinner"},null,-1),e("p",null,"Carregando projetos...",-1)])])):f(p).length>0?(r(),n("div",T,[(r(!0),n(x,null,D(f(p),d=>(r(),S(z,{key:d.id,project:d,onOpen:q=>_(d)},null,8,["project","onOpen"]))),128))])):(r(),n("div",U,[...o[3]||(o[3]=[e("div",{class:"empty-icon"},[e("i",{class:"bi bi-folder-plus"})],-1),e("h3",null,"Comece seu portfólio!",-1),e("p",null,'Clique em "Novo Projeto" acima para adicionar seu primeiro trabalho.',-1)])])),$(B,{"is-open":l.value,"project-to-edit":c.value,"is-loading":u.value,onClose:o[0]||(o[0]=d=>l.value=!1),onSave:b,onDelete:y},null,8,["is-open","project-to-edit","is-loading"])]))}}),R=j(V,[["__scopeId","data-v-e1f34a16"]]);export{R as default};
