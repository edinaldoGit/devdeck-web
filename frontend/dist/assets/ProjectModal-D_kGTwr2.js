import{d as N,a as O,b as j,T as S,e as V,f as B,g as n,h as b,i as e,n as m,t as d,j as D,o as i,_ as I,u as G,r as h,c as P,w as H,F as w,l as C,k as _,p as f,v as g,E as Q,q as W}from"./index-G_Ayme-S.js";const X={class:"confirm-card"},Y={class:"actions"},Z=N({__name:"ConfirmDialog",props:{isOpen:{type:Boolean},title:{},message:{},confirmText:{},cancelText:{},isDanger:{type:Boolean}},emits:["confirm","cancel"],setup(o,{emit:E}){return(v,u)=>(i(),O(B,{to:"body"},[j(S,{name:"fade"},{default:V(()=>[o.isOpen?(i(),n("div",{key:0,class:"confirm-backdrop",onClick:u[2]||(u[2]=D(c=>v.$emit("cancel"),["self"]))},[e("div",X,[e("div",{class:m(["icon-header",{danger:o.isDanger}])},[e("i",{class:m(["bi",o.isDanger?"bi-exclamation-triangle-fill":"bi-info-circle-fill"])},null,2)],2),e("h3",null,d(o.title||"Tem certeza?"),1),e("p",null,d(o.message||"Essa ação não pode ser desfeita."),1),e("div",Y,[e("button",{class:"btn-cancel",onClick:u[0]||(u[0]=c=>v.$emit("cancel"))},d(o.cancelText||"Cancelar"),1),e("button",{class:m(["btn-confirm",{"btn-danger":o.isDanger}]),onClick:u[1]||(u[1]=c=>v.$emit("confirm"))},d(o.confirmText||"Confirmar"),3)])])])):b("",!0)]),_:1})]))}}),ee=I(Z,[["__scopeId","data-v-68fd7319"]]),te={class:"modal-container layout-modal"},le={class:"modal-header"},se={class:"header-text"},ae={key:0},ie={key:1},oe={class:"modal-body"},ne={class:"image-gallery-section"},re={class:"section-label"},ue={class:"gallery-grid"},de=["src"],ce={class:"item-overlay"},me={key:0,class:"badge-cover"},ve={class:"actions"},pe=["onClick"],fe=["onClick"],ge={class:"form-grid"},be={class:"form-group"},ke={class:"form-group"},ye={class:"form-group full-width"},he={class:"form-group"},Ce={class:"form-group"},De={class:"form-group full-width"},Te={class:"tags-container input-match"},$e=["onClick"],xe=["onKeydown"],we={class:"modal-footer"},je=["disabled"],Ee=["disabled"],Pe=N({__name:"ProjectModal",props:{isOpen:{type:Boolean},projectToEdit:{},isLoading:{type:Boolean}},emits:["close","save","delete"],setup(o,{emit:E}){const v=o,u=E,c=G(),l=h({title:"",shortDescription:"",detailedDescription:"",images:[],linkRepo:"",linkDeploy:"",tags:[]}),T=h(""),p=h(!1),$=h(null),x=h(!1),k=P(()=>!!v.projectToEdit),R=P(()=>k.value?"Gerenciar Projeto":"Novo Projeto");H(()=>v.projectToEdit,a=>{a?(l.value=JSON.parse(JSON.stringify(a)),l.value.images||(l.value.images=[]),l.value.tags||(l.value.tags=[])):l.value={title:"",shortDescription:"",detailedDescription:"",images:[],linkRepo:"",linkDeploy:"",tags:[]}},{immediate:!0});function U(){if(!l.value.title){c.warning("O título do projeto é obrigatório.");return}u("save",JSON.parse(JSON.stringify(l.value)))}function z(){x.value=!0}function F(){l.value.id&&(u("delete",l.value.id),x.value=!1)}function M(){if((l.value.images?.length||0)>=5){c.warning("Máximo de 5 fotos permitido.");return}$.value?.click()}async function J(a){const t=a.target;if(t.files&&t.files[0]){const s=t.files[0],r=new FormData;r.append("image",s),p.value=!0;try{const{data:y}=await W.post("/uploads",r,{headers:{"Content-Type":"multipart/form-data"}});l.value.images||(l.value.images=[]),l.value.images.push(y.url),c.success("Imagem enviada com sucesso!")}catch{c.error("Erro ao fazer upload da imagem.")}finally{p.value=!1,$.value&&($.value.value="")}}}function L(a){l.value.images?.splice(a,1)}function K(a){const t=l.value.images?.splice(a,1)[0];t&&(l.value.images?.unshift(t),c.info("Capa do projeto atualizada."))}function q(){const a=T.value.trim();a&&(l.value.tags||(l.value.tags=[]),l.value.tags.includes(a)||l.value.tags.push(a)),T.value=""}function A(a){l.value.tags&&l.value.tags.splice(a,1)}return(a,t)=>(i(),n(w,null,[(i(),O(B,{to:"body"},[j(S,{name:"modal-fade"},{default:V(()=>[o.isOpen?(i(),n("div",{key:0,class:"modal-backdrop",onClick:t[8]||(t[8]=D(s=>a.$emit("close"),["self"]))},[e("div",te,[e("header",le,[e("div",se,[e("h3",null,d(R.value),1),k.value?(i(),n("p",ie,"Edite as informações do projeto.")):(i(),n("p",ae,"Preencha os dados abaixo."))]),e("button",{class:"btn-close",onClick:t[0]||(t[0]=s=>a.$emit("close"))},[...t[10]||(t[10]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",oe,[e("div",ne,[e("div",re,[t[11]||(t[11]=e("i",{class:"bi bi-images"},null,-1)),C(" Galeria ("+d(l.value.images?.length||0)+"/5) ",1)]),e("div",ue,[(l.value.images?.length||0)<5?(i(),n("div",{key:0,class:m(["upload-box",{disabled:p.value}]),onClick:M},[e("i",{class:m(["bi",p.value?"bi-hourglass-split":"bi-plus-lg"])},null,2),e("span",null,d(p.value?"...":"Adicionar"),1)],2)):b("",!0),(i(!0),n(w,null,_(l.value.images,(s,r)=>(i(),n("div",{key:s,class:m(["gallery-item",{"is-cover":r===0}])},[e("img",{src:s},null,8,de),e("div",ce,[r===0?(i(),n("span",me,"Capa")):b("",!0),e("div",ve,[r!==0?(i(),n("button",{key:0,onClick:D(y=>K(r),["stop"]),class:"btn-icon-action",title:"Definir como Capa"},[...t[12]||(t[12]=[e("i",{class:"bi bi-star-fill"},null,-1)])],8,pe)):b("",!0),e("button",{class:"btn-icon-action delete",onClick:D(y=>L(r),["stop"]),title:"Remover"},[...t[13]||(t[13]=[e("i",{class:"bi bi-trash-fill"},null,-1)])],8,fe)])])],2))),128))]),e("input",{type:"file",ref_key:"fileInput",ref:$,hidden:"",accept:"image/*",onChange:J},null,544)]),e("div",ge,[e("div",be,[t[14]||(t[14]=e("label",null,"Título do Projeto",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.title=s),type:"text",class:"input-match",placeholder:"Ex: DevDeck Plataform"},null,512),[[g,l.value.title]])]),e("div",ke,[t[15]||(t[15]=e("label",null,"Descrição Curta",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.shortDescription=s),type:"text",class:"input-match",placeholder:"Resumo de uma linha"},null,512),[[g,l.value.shortDescription]])]),e("div",ye,[t[16]||(t[16]=e("label",null,"Descrição Detalhada",-1)),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.detailedDescription=s),rows:"5",class:"input-match area",placeholder:"Descreva as funcionalidades..."},null,512),[[g,l.value.detailedDescription]])]),e("div",he,[t[17]||(t[17]=e("label",null,[e("i",{class:"bi bi-github"}),C(" Repositório")],-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.linkRepo=s),type:"text",class:"input-match",placeholder:"https://github.com/..."},null,512),[[g,l.value.linkRepo]])]),e("div",Ce,[t[18]||(t[18]=e("label",null,[e("i",{class:"bi bi-globe"}),C(" Deploy (Demo)")],-1)),f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.linkDeploy=s),type:"text",class:"input-match",placeholder:"https://..."},null,512),[[g,l.value.linkDeploy]])]),e("div",De,[t[19]||(t[19]=e("label",null,"Tecnologias",-1)),e("div",Te,[(i(!0),n(w,null,_(l.value.tags,(s,r)=>(i(),n("span",{key:r,class:"tag-pill-solid"},[C(d(s)+" ",1),e("i",{class:"bi bi-x",onClick:y=>A(r)},null,8,$e)]))),128)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>T.value=s),onKeydown:Q(D(q,["prevent"]),["enter"]),placeholder:"Digite e Enter...",class:"tag-input-field"},null,40,xe),[[g,T.value]])])])])]),e("footer",we,[k.value?(i(),n("button",{key:0,class:"btn-delete-glass",onClick:z,disabled:o.isLoading},[...t[20]||(t[20]=[e("i",{class:"bi bi-trash"},null,-1),C(" Excluir Projeto ",-1)])],8,je)):b("",!0),e("div",{class:m(["footer-actions",{"ml-auto":!k.value}])},[e("button",{class:"btn-cancel",onClick:t[7]||(t[7]=s=>a.$emit("close"))},"Cancelar"),e("button",{class:"btn-save-white",onClick:U,disabled:o.isLoading||p.value},d(k.value?"Salvar":"Criar"),9,Ee)],2)])])])):b("",!0)]),_:1})])),j(ee,{"is-open":x.value,title:"Excluir Projeto?",message:"Tem certeza? Isso removerá o projeto permanentemente.","confirm-text":"Excluir","cancel-text":"Cancelar","is-danger":!0,onCancel:t[9]||(t[9]=s=>x.value=!1),onConfirm:F},null,8,["is-open"])],64))}}),Ne=I(Pe,[["__scopeId","data-v-335f1225"]]);export{Ne as P};
