import{d as K,C as z,s as H,u as j,D as G,m as q,r as g,x as Q,w as R,g as r,i as s,b as W,n as k,t as h,e as X,T as Y,l as d,p as t,v as a,F as S,k as C,E as Z,j as x,h as E,I as D,o as u,_ as ss}from"./index-G_Ayme-S.js";const ls={class:"view-content"},is={class:"toolbar"},es={class:"save-wrapper"},os=["disabled"],ns={key:0,class:"unsaved-badge"},ts={class:"profile-layout-grid"},as={class:"glass-section h-full"},rs={class:"inputs-grid two-col-mobile"},us={class:"form-group"},ds={class:"form-group"},cs={class:"form-group full"},ps={class:"form-group full"},ms={class:"glass-section h-full social-section"},vs={class:"inputs-grid single-col social-grid-content"},bs={class:"form-group"},fs={class:"form-group"},gs={class:"form-group"},hs={class:"glass-section full-span"},_s={class:"skills-wrapper input-premium"},ks=["onClick"],ys=["onKeydown"],Us={class:"glass-section"},ws={key:0,class:"accordion-list"},Vs=["onClick"],Ss={class:"head-info"},Cs={key:0},xs={class:"head-actions"},Es=["onClick"],Ns={class:"accordion-content"},Ps={class:"inputs-grid single-col"},Is={class:"form-group"},As=["onUpdate:modelValue"],Ls={class:"form-group"},Rs=["onUpdate:modelValue"],Ds={class:"form-group"},Js=["onUpdate:modelValue"],Ts={class:"form-group"},Os=["onUpdate:modelValue"],Fs={class:"glass-section"},$s={key:0,class:"accordion-list"},Bs=["onClick"],Ms={class:"head-info"},Ks={key:0},zs={class:"head-actions"},Hs=["onClick"],js={class:"accordion-content"},Gs={class:"inputs-grid single-col"},qs={class:"form-group"},Qs=["onUpdate:modelValue"],Ws={class:"form-group"},Xs=["onUpdate:modelValue"],Ys={class:"form-group"},Zs=["onUpdate:modelValue"],sl={class:"form-group"},ll=["onUpdate:modelValue"],il=K({__name:"ProfileView",setup(el){const y=z(),c=H(),U=j(),{userProfile:w}=G(y),e=q({name:"",role:"",headline:"",location:"",bio:"",avatarUrl:"",skills:[],social:{},experiences:[],education:[]}),_=g(""),m=g(!1),p=g(!1),V=g(!0);let N="";const v=g(null),b=g(null);function J(o){v.value=v.value===o?null:o}function T(o){b.value=b.value===o?null:o}function P(o){o&&(e.name=o.name||"",e.role=o.role||"",e.headline=o.headline||"",e.location=o.location||"",e.bio=o.bio||"",e.avatarUrl=o.avatarUrl||"",e.skills=[...o.skills||[]],e.social={...o.social||{}},e.experiences=JSON.parse(JSON.stringify(o.experiences||[])),e.education=JSON.parse(JSON.stringify(o.education||[])),I())}function I(){N=JSON.stringify(e),p.value=!1}Q(async()=>{V.value=!0;try{c.user||await c.checkAuth(),c.user?.id&&await y.fetchUserProfile(c.user.id),w.value&&P(w.value)}catch(o){console.error(o),U.error("Erro ao carregar dados.")}finally{V.value=!1}}),R(w,o=>{o&&!p.value&&P(o)},{deep:!0}),R(e,o=>{if(V.value)return;const l=JSON.stringify(o);p.value=l!==N},{deep:!0});async function O(){const o=_.value.trim();o&&!e.skills.includes(o)&&(e.skills.push(o),_.value="")}function F(o){e.skills.splice(o,1)}function A(){const o=Date.now();e.experiences.push({id:o,role:"",company:"",period:"",description:""}),v.value=o}function $(o){e.experiences.splice(o,1)}function L(){const o=Date.now();e.education.push({id:o,course:"",institution:"",year:"",certificateUrl:""}),b.value=o}function B(o){e.education.splice(o,1)}async function M(){if(p.value){m.value=!0;try{await y.updateUserProfile(e),c.user&&(c.user.name=e.name,c.user.avatar=e.avatarUrl,c.user.headline=e.headline),I(),v.value=null,b.value=null,U.success("Salvo com sucesso!")}catch{U.error("Erro ao salvar.")}finally{m.value=!1}}}return(o,l)=>(u(),r("div",ls,[s("div",is,[s("div",es,[s("button",{class:k(["btn-action-white",{"pulse-active":p.value}]),onClick:M,disabled:m.value||!p.value},[s("i",{class:k(["bi",m.value?"bi-hourglass-split":"bi-check-lg"])},null,2),s("span",null,h(m.value?"Salvando...":"Salvar Alterações"),1)],10,os),W(Y,{name:"fade-slide"},{default:X(()=>[p.value&&!m.value?(u(),r("div",ns,[...l[8]||(l[8]=[s("i",{class:"bi bi-info-circle-fill"},null,-1),d(" Alterações não salvas ",-1)])])):E("",!0)]),_:1})])]),s("div",ts,[s("section",as,[l[13]||(l[13]=s("div",{class:"section-title"},[s("i",{class:"bi bi-person-badge-fill"}),d(" Informações Pessoais ")],-1)),s("div",rs,[s("div",us,[l[9]||(l[9]=s("label",null,"Nome Completo",-1)),t(s("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>e.name=i),type:"text",class:"input-premium",placeholder:"Seu nome"},null,512),[[a,e.name]])]),s("div",ds,[l[10]||(l[10]=s("label",null,"Cargo / Título",-1)),t(s("input",{"onUpdate:modelValue":l[1]||(l[1]=i=>e.headline=i),type:"text",class:"input-premium",placeholder:"Ex: Fullstack Developer"},null,512),[[a,e.headline]])]),s("div",cs,[l[11]||(l[11]=s("label",null,"Localização",-1)),t(s("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>e.location=i),type:"text",class:"input-premium",placeholder:"Ex: São Paulo, Brasil"},null,512),[[a,e.location]])]),s("div",ps,[l[12]||(l[12]=s("label",null,"Sobre Mim",-1)),t(s("textarea",{"onUpdate:modelValue":l[3]||(l[3]=i=>e.bio=i),rows:"3",class:"input-premium area",placeholder:"Resumo profissional..."},null,512),[[a,e.bio]])])])]),s("section",ms,[l[17]||(l[17]=s("div",{class:"section-title"},[s("i",{class:"bi bi-share-fill"}),d(" Redes Sociais")],-1)),s("div",vs,[s("div",bs,[l[14]||(l[14]=s("label",null,[s("i",{class:"bi bi-github"}),d(" GitHub")],-1)),t(s("input",{"onUpdate:modelValue":l[4]||(l[4]=i=>e.social.github=i),type:"text",class:"input-premium",placeholder:"URL do perfil"},null,512),[[a,e.social.github]])]),s("div",fs,[l[15]||(l[15]=s("label",null,[s("i",{class:"bi bi-linkedin"}),d(" LinkedIn")],-1)),t(s("input",{"onUpdate:modelValue":l[5]||(l[5]=i=>e.social.linkedin=i),type:"text",class:"input-premium",placeholder:"URL do perfil"},null,512),[[a,e.social.linkedin]])]),s("div",gs,[l[16]||(l[16]=s("label",null,[s("i",{class:"bi bi-globe"}),d(" Site / Portfólio")],-1)),t(s("input",{"onUpdate:modelValue":l[6]||(l[6]=i=>e.social.website=i),type:"text",class:"input-premium",placeholder:"URL do site"},null,512),[[a,e.social.website]])])])]),s("section",hs,[l[18]||(l[18]=s("div",{class:"section-title"},[s("i",{class:"bi bi-lightning-charge-fill"}),d(" Habilidades")],-1)),s("div",_s,[(u(!0),r(S,null,C(e.skills,(i,f)=>(u(),r("span",{key:f,class:"tag-pill"},[d(h(i)+" ",1),s("i",{class:"bi bi-x",onClick:n=>F(f)},null,8,ks)]))),128)),t(s("input",{"onUpdate:modelValue":l[7]||(l[7]=i=>_.value=i),onKeydown:Z(x(O,["prevent"]),["enter"]),placeholder:"Digite uma habilidade e pressione Enter...",class:"tag-input-transparent"},null,40,ys),[[a,_.value]])])]),s("section",Us,[s("div",{class:"section-header-row"},[l[20]||(l[20]=s("div",{class:"section-title"},[s("i",{class:"bi bi-briefcase-fill"}),d(" Experiência")],-1)),s("button",{class:"btn-small-add",onClick:A},[...l[19]||(l[19]=[s("i",{class:"bi bi-plus"},null,-1)])])]),e.experiences.length>0?(u(),r("div",ws,[(u(!0),r(S,null,C(e.experiences,(i,f)=>(u(),r("div",{key:i.id,class:"accordion-glass"},[s("div",{class:"accordion-head",onClick:n=>J(i.id)},[s("div",Ss,[s("strong",null,h(i.role||"Nova Vaga"),1),i.company?(u(),r("span",Cs,h(i.company),1)):E("",!0)]),s("div",xs,[s("button",{class:"btn-icon-danger",onClick:x(n=>$(f),["stop"])},[...l[21]||(l[21]=[s("i",{class:"bi bi-trash"},null,-1)])],8,Es),s("i",{class:k(["bi chevron",v.value===i.id?"bi-chevron-up":"bi-chevron-down"])},null,2)])],8,Vs),t(s("div",Ns,[s("div",Ps,[s("div",Is,[l[22]||(l[22]=s("label",null,"Cargo",-1)),t(s("input",{"onUpdate:modelValue":n=>i.role=n,class:"input-premium"},null,8,As),[[a,i.role]])]),s("div",Ls,[l[23]||(l[23]=s("label",null,"Empresa",-1)),t(s("input",{"onUpdate:modelValue":n=>i.company=n,class:"input-premium"},null,8,Rs),[[a,i.company]])]),s("div",Ds,[l[24]||(l[24]=s("label",null,"Período",-1)),t(s("input",{"onUpdate:modelValue":n=>i.period=n,class:"input-premium"},null,8,Js),[[a,i.period]])]),s("div",Ts,[l[25]||(l[25]=s("label",null,"Descrição",-1)),t(s("textarea",{"onUpdate:modelValue":n=>i.description=n,rows:"3",class:"input-premium area"},null,8,Os),[[a,i.description]])])])],512),[[D,v.value===i.id]])]))),128))])):(u(),r("div",{key:1,class:"empty-section",onClick:A},[...l[26]||(l[26]=[s("i",{class:"bi bi-briefcase"},null,-1),s("p",null,"Nenhuma experiência.",-1),s("span",null,"Adicionar",-1)])]))]),s("section",Fs,[s("div",{class:"section-header-row"},[l[28]||(l[28]=s("div",{class:"section-title"},[s("i",{class:"bi bi-mortarboard-fill"}),d(" Formação")],-1)),s("button",{class:"btn-small-add",onClick:L},[...l[27]||(l[27]=[s("i",{class:"bi bi-plus"},null,-1)])])]),e.education.length>0?(u(),r("div",$s,[(u(!0),r(S,null,C(e.education,(i,f)=>(u(),r("div",{key:i.id,class:"accordion-glass"},[s("div",{class:"accordion-head",onClick:n=>T(i.id)},[s("div",Ms,[s("strong",null,h(i.course||"Curso"),1),i.institution?(u(),r("span",Ks,h(i.institution),1)):E("",!0)]),s("div",zs,[s("button",{class:"btn-icon-danger",onClick:x(n=>B(f),["stop"])},[...l[29]||(l[29]=[s("i",{class:"bi bi-trash"},null,-1)])],8,Hs),s("i",{class:k(["bi chevron",b.value===i.id?"bi-chevron-up":"bi-chevron-down"])},null,2)])],8,Bs),t(s("div",js,[s("div",Gs,[s("div",qs,[l[30]||(l[30]=s("label",null,"Curso",-1)),t(s("input",{"onUpdate:modelValue":n=>i.course=n,class:"input-premium"},null,8,Qs),[[a,i.course]])]),s("div",Ws,[l[31]||(l[31]=s("label",null,"Instituição",-1)),t(s("input",{"onUpdate:modelValue":n=>i.institution=n,class:"input-premium"},null,8,Xs),[[a,i.institution]])]),s("div",Ys,[l[32]||(l[32]=s("label",null,"Ano",-1)),t(s("input",{"onUpdate:modelValue":n=>i.year=n,class:"input-premium"},null,8,Zs),[[a,i.year]])]),s("div",sl,[l[33]||(l[33]=s("label",null,"URL Certificado",-1)),t(s("input",{"onUpdate:modelValue":n=>i.certificateUrl=n,class:"input-premium"},null,8,ll),[[a,i.certificateUrl]])])])],512),[[D,b.value===i.id]])]))),128))])):(u(),r("div",{key:1,class:"empty-section",onClick:L},[...l[34]||(l[34]=[s("i",{class:"bi bi-mortarboard"},null,-1),s("p",null,"Nenhuma formação.",-1),s("span",null,"Adicionar",-1)])]))])])]))}}),nl=ss(il,[["__scopeId","data-v-d560d9b7"]]);export{nl as default};
