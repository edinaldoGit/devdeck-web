import{d as y,D as A,r as v,x as D,w as R,g as n,i as t,p as U,v as E,z as r,l as p,h as P,F as V,k as S,t as i,n as f,o,_ as T}from"./index-G_Ayme-S.js";import{u as B}from"./admin-ajl1iES5.js";const N={class:"admin-panel"},L={class:"panel-header-controls"},M={class:"control-item search-wrapper"},$={class:"glass-table-container"},I={key:0,class:"loading-state"},z={key:1,class:"glass-table"},F={class:"left"},G={class:"user-cell"},O=["src"],Q={key:1,class:"avatar-placeholder"},W={class:"left"},j={class:"center"},q={class:"center"},H={class:"center"},J={class:"actions-flex"},K=["onClick","title"],X=["onClick"],Y={key:0},Z={class:"pagination-external"},tt=["disabled"],et={class:"page-indicator"},st="http://localhost:3000",at=5,nt=y({__name:"AdminUsersView",setup(ot){const c=B(),{users:_,isLoading:b}=A(c),d=v(""),l=v(1);D(()=>{u()});async function u(){const a={page:l.value,limit:at,search:d.value};await c.fetchUsers(a)}function g(a,e){let s;return(...m)=>{clearTimeout(s),s=setTimeout(()=>a(...m),e)}}R(d,g(()=>{l.value=1,u()},500));function k(){l.value++,u()}function C(){l.value>1&&(l.value--,u())}function w(a){return new Date(a).toLocaleDateString("pt-BR")}function h(a){const e=a.avatar||a.avatarUrl||null;return e&&e.toString().startsWith("/")?`${st}${e}`:e}function x(a){switch(a){case"admin":return"ADMIN";case"recruiter":return"RECRUTADOR";default:return"DEV"}}return(a,e)=>(o(),n("div",N,[t("div",L,[t("div",M,[e[1]||(e[1]=t("i",{class:"bi bi-search"},null,-1)),U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),type:"text",placeholder:"Buscar usuário por nome ou email..."},null,512),[[E,d.value]])])]),t("div",$,[r(b)?(o(),n("div",I,[...e[2]||(e[2]=[t("i",{class:"bi bi-hourglass-split"},null,-1),p(" Carregando usuários... ",-1)])])):(o(),n("table",z,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{class:"left"},"Usuário"),t("th",{class:"left"},"Email"),t("th",{class:"center"},"Cadastro"),t("th",{class:"center"},"Cargo"),t("th",{class:"center"},"Ações")])],-1)),t("tbody",null,[(o(!0),n(V,null,S(r(_),s=>(o(),n("tr",{key:s.id},[t("td",F,[t("div",G,[h(s)?(o(),n("img",{key:0,src:h(s),class:"avatar-img"},null,8,O)):(o(),n("div",Q,i(s.name.charAt(0).toUpperCase()),1)),t("strong",null,i(s.name),1)])]),t("td",W,i(s.email),1),t("td",j,i(w(s.createdAt)),1),t("td",q,[t("span",{class:f(["role-badge",s.role])},i(x(s.role)),3)]),t("td",H,[t("div",J,[t("button",{class:"btn-icon",onClick:m=>r(c).changeRole(s.id,s.role),title:s.role==="admin"?"Rebaixar para Dev":"Promover a Admin"},[t("i",{class:f(["bi",s.role==="admin"?"bi-arrow-down-circle":"bi-arrow-up-circle-fill"])},null,2)],8,K),t("button",{class:"btn-icon delete",onClick:m=>r(c).banUser(s.id),title:"Banir Usuário"},[...e[3]||(e[3]=[t("i",{class:"bi bi-trash-fill"},null,-1)])],8,X)])])]))),128)),r(_).length===0?(o(),n("tr",Y,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"empty-cell"},"Nenhum usuário encontrado.",-1)])])):P("",!0)])]))]),t("div",Z,[t("button",{onClick:C,disabled:l.value===1,class:"page-pill"},[...e[6]||(e[6]=[t("i",{class:"bi bi-chevron-left"},null,-1),p(" Anterior ",-1)])],8,tt),t("span",et,"Página "+i(l.value),1),t("button",{onClick:k,class:"page-pill"},[...e[7]||(e[7]=[p(" Próxima ",-1),t("i",{class:"bi bi-chevron-right"},null,-1)])])])]))}}),rt=T(nt,[["__scopeId","data-v-6d4dda91"]]);export{rt as default};
