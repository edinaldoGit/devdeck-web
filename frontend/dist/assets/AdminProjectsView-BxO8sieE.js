import{d as C,D as E,r as d,x as S,w as T,g as i,i as e,b as V,p as A,v as M,z as b,l as f,h as B,F as N,k as L,t as m,o as r,_ as R}from"./index-G_Ayme-S.js";import{u as z}from"./admin-ajl1iES5.js";import{P as F}from"./ProjectModal-D_kGTwr2.js";const G={class:"admin-panel"},I={class:"panel-header-controls"},$={class:"control-item search-wrapper"},Q={class:"glass-table-container"},U={key:0,class:"loading-state"},q={key:1,class:"glass-table"},H={class:"user-cell"},J={class:"user-cell",style:{"font-size":"0.9rem",opacity:"0.9"}},K={class:"actions-cell"},O=["onClick"],W={key:0},X={class:"pagination-external"},Y=["disabled"],Z={class:"page-indicator"},ee=5,te=C({__name:"AdminProjectsView",setup(se){const v=z(),{projects:g,isLoading:P}=E(v),c=d(!1),a=d(null),u=d(!1),p=d(""),o=d(1);S(()=>{n()});async function n(){const s={page:o.value,limit:ee,search:p.value};await v.fetchProjects(s)}function h(s,t){let l;return(..._)=>{clearTimeout(l),l=setTimeout(()=>s(..._),t)}}T(p,h(()=>{o.value=1,n()},500));function j(){o.value++,n()}function y(){o.value>1&&(o.value--,n())}function w(s){return new Date(s).toLocaleDateString("pt-BR")}function D(s){a.value=s,c.value=!0}async function k(s){if(!a.value?.id)return;u.value=!0;const t=await v.updateProject(a.value.id,s);u.value=!1,t&&(c.value=!1,a.value=null,n())}async function x(s){u.value=!0;const t=await v.deleteProject(s);u.value=!1,t&&(c.value=!1,a.value=null,n())}return(s,t)=>(r(),i("div",G,[e("div",I,[e("div",$,[t[2]||(t[2]=e("i",{class:"bi bi-search"},null,-1)),A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),type:"text",placeholder:"Buscar projeto..."},null,512),[[M,p.value]])])]),e("div",Q,[b(P)?(r(),i("div",U,[...t[3]||(t[3]=[e("i",{class:"bi bi-hourglass-split"},null,-1),f(" Carregando projetos... ",-1)])])):(r(),i("table",q,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"Projeto"),e("th",null,"Dono"),e("th",null,"Data Criação"),e("th",{class:"actions-col"},"Gerenciar")])],-1)),e("tbody",null,[(r(!0),i(N,null,L(b(g),l=>(r(),i("tr",{key:l.id},[e("td",null,[e("div",H,[t[4]||(t[4]=e("div",{class:"project-icon"},[e("i",{class:"bi bi-window-stack"})],-1)),e("strong",null,m(l.title),1)])]),e("td",null,[e("div",J,[t[5]||(t[5]=e("i",{class:"bi bi-person-circle",style:{color:"var(--color-secondary)"}},null,-1)),f(" "+m(l.user?.name||"Desconhecido"),1)])]),e("td",null,m(w(l.createdAt)),1),e("td",K,[e("button",{class:"btn-icon manage",onClick:_=>D(l),title:"Editar Projeto"},[...t[6]||(t[6]=[e("i",{class:"bi bi-gear-fill"},null,-1)])],8,O)])]))),128)),b(g).length===0?(r(),i("tr",W,[...t[7]||(t[7]=[e("td",{colspan:"4",class:"empty-cell"},"Nenhum projeto cadastrado.",-1)])])):B("",!0)])]))]),e("div",X,[e("button",{onClick:y,disabled:o.value===1,class:"page-pill"},[...t[9]||(t[9]=[e("i",{class:"bi bi-chevron-left"},null,-1),f(" Anterior ",-1)])],8,Y),e("span",Z,"Página "+m(o.value),1),e("button",{onClick:j,class:"page-pill"},[...t[10]||(t[10]=[f(" Próxima ",-1),e("i",{class:"bi bi-chevron-right"},null,-1)])])]),V(F,{"is-open":c.value,"project-to-edit":a.value,"is-loading":u.value,onClose:t[1]||(t[1]=l=>c.value=!1),onSave:k,onDelete:x},null,8,["is-open","project-to-edit","is-loading"])]))}}),ne=R(te,[["__scopeId","data-v-80b44a4f"]]);export{ne as default};
